<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ltd.moore.ctravel.comment.mapper.CommentMessageMapper">
	
<sql id="Column_List">
COMMENT_ID
,CUSTOMER_ID
,EXPERIENCE_ID
,ACCOUNT
,COMMENT_CONTENT
,CHECK_STATUS
,CHECK_PEOPLE
,REMARK
,CREATE_TIME
</sql>
	<sql id="Where_Clause">
		<where>
<if test="condition.commentId != null and condition.commentId != ''" >AND COMMENT_ID = #{condition.commentId}</if>
<if test="condition.customerId != null and condition.customerId != ''" >AND CUSTOMER_ID = #{condition.customerId}</if>
<if test="condition.experienceId != null and condition.experienceId != ''" >AND EXPERIENCE_ID = #{condition.experienceId}</if>
<if test="condition.account != null and condition.account != ''" >AND ACCOUNT like CONCAT('%','${condition.account}','%' )</if>
<if test="condition.commentContent != null and condition.commentContent != ''" >AND COMMENT_CONTENT like CONCAT('%','${condition.commentContent}','%' )</if>
<if test="condition.checkStatus != null and condition.checkStatus != ''" >AND CHECK_STATUS = #{condition.checkStatus}</if>
<if test="condition.checkPeople != null and condition.checkPeople != ''" >AND CHECK_PEOPLE = #{condition.checkPeople}</if>
<if test="condition.remark != null and condition.remark != ''" >AND REMARK = #{condition.remark}</if>
    	</where>
	</sql>
	<select id="getById" resultType="ltd.moore.ctravel.comment.model.CommentMessageVO" parameterType="String">
		select <include refid="Column_List" />
    	from PUB_COMMENT_MESSAGE where COMMENT_ID = #{commentId}
	</select>

	<select id="count" resultType="int" parameterType="map">
		select COUNT(1)
    	from PUB_COMMENT_MESSAGE
    	<include refid="Where_Clause" />
	</select>

	<select id="list" resultType="ltd.moore.ctravel.comment.model.CommentMessageVO" parameterType="map">
		select <include refid="Column_List" />
    	from PUB_COMMENT_MESSAGE
    	<include refid="Where_Clause" />
	</select>
	
<insert id="insert" parameterType="ltd.moore.ctravel.comment.model.CommentMessageVO">
insert into PUB_COMMENT_MESSAGE (<include refid="Column_List" />)
values (
#{commentId}
,#{customerId}
,#{experienceId}
,#{account}
,#{commentContent}
,#{checkStatus}
,#{checkPeople}
,#{remark}
,sysdate()
)
</insert>
	
<update id="update" parameterType="ltd.moore.ctravel.comment.model.CommentMessageVO">
update PUB_COMMENT_MESSAGE
<set>
<if test="commentId != null" >COMMENT_ID = #{commentId},</if>
<if test="customerId != null" >CUSTOMER_ID = #{customerId},</if>
<if test="experienceId != null" >EXPERIENCE_ID = #{experienceId},</if>
<if test="account != null" >ACCOUNT = #{account},</if>
<if test="commentContent != null" >COMMENT_CONTENT = #{commentContent},</if>
<if test="checkStatus != null" >CHECK_STATUS = #{checkStatus},</if>
<if test="checkPeople != null" >CHECK_PEOPLE = #{checkPeople},</if>
<if test="remark != null" >REMARK = #{remark},</if>
UPDATE_TIME = sysdate()
</set>
where COMMENT_ID = #{commentId}
</update>
	
	<delete id="delete" parameterType="java.lang.String" >
		delete from PUB_COMMENT_MESSAGE  where COMMENT_ID = #{commentId}
	</delete>
	
	<delete id="deleteInBulk" parameterType="java.lang.String">
		delete from PUB_COMMENT_MESSAGE  where COMMENT_ID in
		<foreach item="item" index="index" collection="array" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
</mapper>