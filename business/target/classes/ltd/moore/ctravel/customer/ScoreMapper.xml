<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ltd.moore.ctravel.customer.mapper.ScoreMapper">
	
<sql id="Column_List">
CUSTOMER_ID
,ACCOUNT
,SCORE_ID
,SCORE
,RATERED_ID
</sql>
	<sql id="Where_Clause">
		<where>
<if test="condition.customerId != null and condition.customerId!=''">AND CUSTOMER_ID = #{condition.customerId}</if>
<if test="condition.account != null and condition.account!='' ">AND ACCOUNT like CONCAT('%','${condition.account}','%' )</if>
<if test="condition.scoreId != null" >AND SCORE_ID = #{condition.scoreId}</if>
<if test="condition.score != null  and condition.score!=''" >AND SCORE = #{condition.score}</if>
<if test="condition.rateredId != null  and condition.rateredId!=''" >AND RATERED_ID= #{condition.rateredId}</if>
    	</where>
	</sql>
	<select id="getById" resultType="ltd.moore.ctravel.customer.model.ScoreVO" parameterType="String">
		select <include refid="Column_List" />
    	from PUB_SCORE where SCORE_ID = #{scoreId}
	</select>

	<select id="count" resultType="int" parameterType="map">
		select COUNT(1)
    	from PUB_SCORE b
    	<include refid="Where_Clause" />
	</select>

	<select id="list" resultType="ltd.moore.ctravel.customer.model.ScoreVO" parameterType="map">
		select <include refid="Column_List" />
    	from PUB_SCORE b
    	<include refid="Where_Clause" />
	</select>
	<select id="list1" resultType="ltd.moore.ctravel.customer.model.ScoreVO" parameterType="map">
		select <include refid="Column_List" />
		from PUB_SCORE b
		<include refid="Where_Clause" />
	</select>
	
<insert id="insert" parameterType="ltd.moore.ctravel.customer.model.ScoreVO">
insert into PUB_SCORE (<include refid="Column_List" />)
values (
#{customerId}
,#{account}
,#{scoreId}
,#{score}
,#{rateredId}
)
</insert>
	
<update id="update" parameterType="ltd.moore.ctravel.customer.model.ScoreVO">
update PUB_SCORE
<set>
<if test="customerId != null" >CUSTOMER_ID = #{customerId},</if>
<if test="account != null" >ACCOUNT = #{account},</if>
<if test="scoreId != null" >SCORE_ID = #{scoreId},</if>
<if test="score != null" >SCORE = #{score},</if>
<if test="rateredId != null" >RATERED_ID = #{rateredId},</if>
</set>
where SCORE_ID = #{scoreId}
</update>
	
	<delete id="delete" parameterType="java.lang.String" >
		delete from PUB_SCORE  where SCORE_ID = #{scoreId}
	</delete>
	
	<delete id="deleteInBulk" parameterType="java.lang.String">
		delete from PUB_SCORE  where SCORE_ID in
		<foreach item="item" index="index" collection="array" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
</mapper>