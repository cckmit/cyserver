<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ltd.moore.ctravel.experience.mapper.ServiceTimeMapper">
	
<sql id="Column_List">
SERVICE_TIME_ID
,EXPERIENCE_ID
,SERVICE_DATE
,START_TIME
,END_TIME
</sql>
	<sql id="Where_Clause">
		<where>
<if test="condition.serviceTimeId != null" >AND SERVICE_TIME_ID = #{serviceTimeId}</if>
<if test="condition.experienceId != null" >AND EXPERIENCE_ID = #{experienceId}</if>
<if test="condition.serviceDate != null" >AND SERVICE_DATE = #{serviceDate}</if>
<if test="condition.startTime != null" >AND START_TIME = #{startTime}</if>
<if test="condition.endTime != null" >AND END_TIME = #{endTime}</if>
    	</where>
	</sql>
	<select id="getById" resultType="ltd.moore.ctravel.experience.model.ServiceTimeVO" parameterType="String">
		select <include refid="Column_List" />
    	from PUB_SERVICE_TIME where SERVICE_TIME_ID = #{serviceTimeId}
	</select>
	<select id="getByExperienceId" resultType="ltd.moore.ctravel.experience.model.ServiceTimeVO" parameterType="String">
		select <include refid="Column_List" />
		from PUB_SERVICE_TIME where EXPERIENCE_ID = #{experienceId}
	</select>
	<select id="count" resultType="int" parameterType="map">
		select COUNT(1)
    	from PUB_SERVICE_TIME
    	<include refid="Where_Clause" />
	</select>

	<select id="list" resultType="ltd.moore.ctravel.experience.model.ServiceTimeVO" parameterType="map">
		select <include refid="Column_List" />
    	from PUB_SERVICE_TIME
    	<include refid="Where_Clause" />
    	ORDER BY UPDATE_TIME DESC
	</select>
	
<insert id="insert" parameterType="ltd.moore.ctravel.experience.model.ServiceTimeVO">
insert into PUB_SERVICE_TIME (<include refid="Column_List" />)
values (
#{serviceTimeId}
,#{experienceId}
,#{serviceDate}
,#{startTime}
,#{endTime}
)
</insert>
	
<update id="update" parameterType="ltd.moore.ctravel.experience.model.ServiceTimeVO">
update PUB_SERVICE_TIME
<set>
<if test="serviceTimeId != null" >SERVICE_TIME_ID = #{serviceTimeId},</if>
<if test="experienceId != null" >EXPERIENCE_ID = #{experienceId},</if>
<if test="serviceDate != null" >SERVICE_DATE = #{serviceDate},</if>
<if test="startTime != null" >START_TIME = #{startTime},</if>
<if test="endTime != null" >END_TIME = #{endTime},</if>
</set>
where SERVICE_TIME_ID = #{serviceTimeId}
</update>
	
	<delete id="delete" parameterType="java.lang.String" >
		delete from PUB_SERVICE_TIME  where EXPERIENCE_ID = #{experienceId}
	</delete>
	
	<delete id="deleteInBulk" parameterType="java.lang.String">
		delete from PUB_SERVICE_TIME  where SERVICE_TIME_ID in
		<foreach item="item" index="index" collection="array" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
</mapper>