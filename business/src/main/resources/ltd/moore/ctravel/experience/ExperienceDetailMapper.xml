<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ltd.moore.ctravel.experience.mapper.ExperienceDetailMapper">
	
<sql id="Column_List">
EXPERIENCE_DETAIL_ID
,EXPERIENCE_ID
,TITLE
,SUBTITLE
,IMAGE_ID
,IMAGE_URL
,CONTENT_DESCRIPTION
,DESTINATION
,RENDEZVOUS
,CONTENT_DETAILS
,COMMENT
,REQUIREMENT
,PEOPLE_NUMBER
,SORT_NO
</sql>
	<sql id="Column_List2">
		CUSTOMER_ID
		,CURRENCY_TYPE
		,PRICE
		,ENABLED
		,CREATE_TIME
	</sql>
	<sql id="Where_Clause">
		<where>
<if test="condition.experienceDetailId != null" >AND EXPERIENCE_DETAIL_ID = #{experienceDetailId}</if>
<if test="condition.experienceId != null" >AND EXPERIENCE_ID = #{experienceId}</if>
<if test="condition.title != null" >AND TITLE = #{title}</if>
<if test="condition.subtitle != null" >AND SUBTITLE = #{subtitle}</if>
<if test="condition.imageId != null" >AND IMAGE_ID = #{imageId}</if>
<if test="condition.imageUrl != null" >AND IMAGE_URL = #{imageUrl}</if>
<if test="condition.contentDescription != null" >AND CONTENT_DESCRIPTION = #{contentDescription}</if>
<if test="condition.destination != null" >AND DESTINATION = #{destination}</if>
<if test="condition.rendezvous != null" >AND RENDEZVOUS = #{rendezvous}</if>
<if test="condition.contentDetails != null" >AND CONTENT_DETAILS = #{contentDetails}</if>
<if test="condition.comment != null" >AND COMMENT = #{comment}</if>
<if test="condition.requirement != null" >AND REQUIREMENT = #{requirement}</if>
<if test="condition.peopleNumber != null" >AND PEOPLE_NUMBER = #{peopleNumber}</if>
<if test="condition.sortNo != null" >AND SORT_NO = #{sortNo}</if>
    	</where>
	</sql>

	<sql id="Where_Clause2">
		<where>
			1=1
			<if test="condition.title != null and condition.title!='' ">
				AND TITLE like CONCAT('%','${condition.title}','%' )
			</if>
			<if test="condition.serviceName != null and condition.serviceName!='' ">
				AND SERVICE_NAME=#{condition.serviceName}
			</if>
			<if test="condition.enabled != null and condition.enabled!='' ">
				AND ENABLED ==#{condition.enabled}
			</if>
		</where>
	</sql>
	<select id="getById" resultType="ltd.moore.ctravel.experience.model.ExperienceDetailVO" parameterType="String">
		select <include refid="Column_List" />
    	from PUB_EXPERIENCE_DETAIL where EXPERIENCE_DETAIL_ID = #{experienceDetailId}
	</select>

	<select id="getDetailById" resultType="ltd.moore.ctravel.experience.model.ExperienceDetailVO" parameterType="String">
		select <include refid="Column_List" />
		from PUB_EXPERIENCE_DETAIL where EXPERIENCE_ID = #{experienceId}
	</select>
	<select id="count" resultType="int" parameterType="map">
		select COUNT(1)
    	from PUB_EXPERIENCE_DETAIL
    	<include refid="Where_Clause2" />
	</select>

	<select id="list" resultType="ltd.moore.ctravel.experience.model.ExperienceAllVO" parameterType="map">
		select <include refid="Column_List" />,<include refid="Column_List2" />
    	from PUB_EXPERIENCE_DETAIL,PUB_EXPERIENCE
    	<include refid="Where_Clause2" />
	</select>
	
<insert id="insert" parameterType="ltd.moore.ctravel.experience.model.ExperienceDetailVO">
insert into PUB_EXPERIENCE_DETAIL (<include refid="Column_List" />)
values (
#{experienceDetailId}
,#{experienceId}
,#{title}
,#{subtitle}
,#{imageId}
,#{imageUrl}
,#{contentDescription}
,#{destination}
,#{rendezvous}
,#{contentDetails}
,#{comment}
,#{requirement}
,#{peopleNumber}
,#{sortNo}
)
</insert>
	
<update id="update" parameterType="ltd.moore.ctravel.experience.model.ExperienceDetailVO">
update PUB_EXPERIENCE_DETAIL
<set>
<if test="experienceDetailId != null" >EXPERIENCE_DETAIL_ID = #{experienceDetailId},</if>
<if test="experienceId != null" >EXPERIENCE_ID = #{experienceId},</if>
<if test="title != null" >TITLE = #{title},</if>
<if test="subtitle != null" >SUBTITLE = #{subtitle},</if>
<if test="imageId != null" >IMAGE_ID = #{imageId},</if>
<if test="imageUrl != null" >IMAGE_URL = #{imageUrl},</if>
<if test="contentDescription != null" >CONTENT_DESCRIPTION = #{contentDescription},</if>
<if test="destination != null" >DESTINATION = #{destination},</if>
<if test="rendezvous != null" >RENDEZVOUS = #{rendezvous},</if>
<if test="contentDetails != null" >CONTENT_DETAILS = #{contentDetails},</if>
<if test="comment != null" >COMMENT = #{comment},</if>
<if test="requirement != null" >REQUIREMENT = #{requirement},</if>
<if test="peopleNumber != null" >PEOPLE_NUMBER = #{peopleNumber},</if>
<if test="sortNo != null" >	SORT_NO = #{sortNo},</if>
</set>
where EXPERIENCE_DETAIL_ID = #{experienceDetailId}
</update>
	
	<delete id="delete" parameterType="java.lang.String" >
		delete from PUB_EXPERIENCE_DETAIL  where EXPERIENCE_DETAIL_ID = #{experienceDetailId}
	</delete>
	
	<delete id="deleteInBulk" parameterType="java.lang.String">
		delete from PUB_EXPERIENCE_DETAIL  where EXPERIENCE_DETAIL_ID in
		<foreach item="item" index="index" collection="array" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>
</mapper>