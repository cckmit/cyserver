<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cy.core.user.dao.UserAuthMapper" >
  <resultMap id="BaseResultMap" type="com.cy.core.user.entity.UserAuth" >

    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="userid" property="userid" jdbcType="VARCHAR" />
    <result column="username" property="username" jdbcType="VARCHAR" />
    <result column="client_sys" property="clientSys" jdbcType="VARCHAR" />
    <result column="client_meid" property="clientMeid" jdbcType="VARCHAR" />
    <result column="client_macid" property="clientMacid" jdbcType="VARCHAR" />
    <result column="token" property="token" jdbcType="VARCHAR" />
    <result column="token_exp" property="tokenExp" jdbcType="VARCHAR" />
    <result column="token_status" property="tokenStatus" jdbcType="VARCHAR" />
    <result column="token_fh" property="tokenFh" jdbcType="VARCHAR" />
    <result column="token_fh_exp" property="tokenFhExp" jdbcType="VARCHAR" />
    <result column="token_fh_status" property="tokenFhStatus" jdbcType="VARCHAR" />
    <result column="stype" property="stype" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="VARCHAR" />
    <result column="update_time" property="updateTime" jdbcType="VARCHAR" />
    <result column="temp_str1" property="tempStr1" jdbcType="VARCHAR" />
    <result column="temp_str2" property="tempStr2" jdbcType="VARCHAR" />
    <result column="temp_str3" property="tempStr3" jdbcType="VARCHAR" />
    <result column="temp_str4" property="tempStr4" jdbcType="VARCHAR" />
    <result column="temp_str5" property="tempStr5" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jul 27 16:13:49 CST 2017.
    -->
    id, userid, username, client_sys, client_meid, client_macid, token, token_exp, token_status, 
    token_fh, token_fh_exp, token_fh_status, stype, create_time, update_time
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from cy_user_auth
    where id = #{id,jdbcType=INTEGER}
  </select>
 
  <select id="selectCheckToken" resultType="java.lang.Integer" parameterType="com.cy.core.user.entity.UserAuth" >
       select count(id) from cy_user_auth   where 
       userid = #{userid,jdbcType=VARCHAR} and 
       client_meid = #{clientMeid,jdbcType=VARCHAR} and 
       client_macid = #{clientMacid,jdbcType=VARCHAR} and
       token=#{token,jdbcType=VARCHAR} and
       token_exp>now() and token_status="0" and token_fh_status="0"
  </select>
  
    <select id="selectCheckRFToken" resultType="java.lang.Integer" parameterType="com.cy.core.user.entity.UserAuth" >
       select count(id) from cy_user_auth   where 
       userid = #{userid,jdbcType=VARCHAR} and 
       client_meid = #{clientMeid,jdbcType=VARCHAR} and 
       client_macid = #{clientMacid,jdbcType=VARCHAR} and
       token_fh=#{tokenFh,jdbcType=VARCHAR} and
       token_fh_exp>now() and token_status="0" and token_fh_status="0"
  </select>
  
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
     delete from cy_user_auth
    where id = #{id,jdbcType=INTEGER}
  </delete>
  
  
   <delete id="deleteByToken" parameterType="java.lang.String" >
     delete from cy_user_auth   where  token = #{token}
  </delete>
  
  
  <delete id="deleteByuserid" parameterType="com.cy.core.user.entity.UserAuth" >
     delete from cy_user_auth where 
      userid = #{userid,jdbcType=VARCHAR} 
      and stype= #{stype,jdbcType=VARCHAR}
  </delete>
  
  <insert id="insert" parameterType="com.cy.core.user.entity.UserAuth" >
    insert into cy_user_auth (id, userid, username, 
      client_sys, client_meid, client_macid, 
      token, token_exp, token_status, 
      token_fh, token_fh_exp, token_fh_status, 
      stype, create_time, update_time,temp_str1,temp_str2,temp_str3,temp_str4,temp_str5
      )
    values (#{id,jdbcType=INTEGER}, #{userid,jdbcType=VARCHAR}, #{username,jdbcType=VARCHAR}, 
      #{clientSys,jdbcType=VARCHAR}, #{clientMeid,jdbcType=VARCHAR}, #{clientMacid,jdbcType=VARCHAR}, 
      #{token,jdbcType=VARCHAR}, #{tokenExp,jdbcType=VARCHAR}, #{tokenStatus,jdbcType=VARCHAR}, 
      #{tokenFh,jdbcType=VARCHAR}, #{tokenFhExp,jdbcType=VARCHAR}, #{tokenFhStatus,jdbcType=VARCHAR}, 
      #{stype,jdbcType=VARCHAR}, #{createTime,jdbcType=VARCHAR}, #{updateTime,jdbcType=VARCHAR},
      #{tempStr1,jdbcType=VARCHAR},#{tempStr2,jdbcType=VARCHAR},#{tempStr3,jdbcType=VARCHAR},
      #{tempStr4,jdbcType=VARCHAR},#{tempStr5,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.cy.core.user.entity.UserAuth" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jul 27 16:13:49 CST 2017.
    -->
    insert into cy_user_auth
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="userid != null" >
        userid,
      </if>
      <if test="username != null" >
        username,
      </if>
      <if test="clientSys != null" >
        client_sys,
      </if>
      <if test="clientMeid != null" >
        client_meid,
      </if>
      <if test="clientMacid != null" >
        client_macid,
      </if>
      <if test="token != null" >
        token,
      </if>
      <if test="tokenExp != null" >
        token_exp,
      </if>
      <if test="tokenStatus != null" >
        token_status,
      </if>
      <if test="tokenFh != null" >
        token_fh,
      </if>
      <if test="tokenFhExp != null" >
        token_fh_exp,
      </if>
      <if test="tokenFhStatus != null" >
        token_fh_status,
      </if>
      <if test="stype != null" >
        stype,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="updateTime != null" >
        update_time,
      </if>
       <if test="tempStr1 != null" >
        temp_str1,
      </if>
        <if test="tempStr2 != null" >
        temp_str2,
      </if>
        <if test="tempStr3 != null" >
        temp_str3,
      </if>
        <if test="tempStr4 != null" >
        temp_str4,
      </if>
        <if test="tempStr5 != null" >
        temp_str5,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="userid != null" >
        #{userid,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        #{username,jdbcType=VARCHAR},
      </if>
      <if test="clientSys != null" >
        #{clientSys,jdbcType=VARCHAR},
      </if>
      <if test="clientMeid != null" >
        #{clientMeid,jdbcType=VARCHAR},
      </if>
      <if test="clientMacid != null" >
        #{clientMacid,jdbcType=VARCHAR},
      </if>
      <if test="token != null" >
        #{token,jdbcType=VARCHAR},
      </if>
      <if test="tokenExp != null" >
        #{tokenExp,jdbcType=VARCHAR},
      </if>
      <if test="tokenStatus != null" >
        #{tokenStatus,jdbcType=VARCHAR},
      </if>
      <if test="tokenFh != null" >
        #{tokenFh,jdbcType=VARCHAR},
      </if>
      <if test="tokenFhExp != null" >
        #{tokenFhExp,jdbcType=VARCHAR},
      </if>
      <if test="tokenFhStatus != null" >
        #{tokenFhStatus,jdbcType=VARCHAR},
      </if>
      <if test="stype != null" >
        #{stype,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=VARCHAR},
      </if>
          <if test="tempStr1 != null" >
        #{tempStr1,jdbcType=VARCHAR},
      </if>
          <if test="tempStr2 != null" >
        #{tempStr2,jdbcType=VARCHAR},
      </if>
          <if test="tempStr3 != null" >
        #{tempStr3,jdbcType=VARCHAR},
      </if>
          <if test="tempStr4 != null" >
        #{tempStr4,jdbcType=VARCHAR},
      </if>
      <if test="tempStr5 != null" >
        #{tempStr5,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.cy.core.user.entity.UserAuth" >
    update cy_user_auth
    <set >
      <if test="userid != null" >
        userid = #{userid,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        username = #{username,jdbcType=VARCHAR},
      </if>
      <if test="clientSys != null" >
        client_sys = #{clientSys,jdbcType=VARCHAR},
      </if>
      <if test="clientMeid != null" >
        client_meid = #{clientMeid,jdbcType=VARCHAR},
      </if>
      <if test="clientMacid != null" >
        client_macid = #{clientMacid,jdbcType=VARCHAR},
      </if>
      <if test="token != null" >
        token = #{token,jdbcType=VARCHAR},
      </if>
      <if test="tokenExp != null" >
        token_exp = #{tokenExp,jdbcType=VARCHAR},
      </if>
      <if test="tokenStatus != null" >
        token_status = #{tokenStatus,jdbcType=VARCHAR},
      </if>
      <if test="tFresh != null" >
        token_fh = #{tokenFh,jdbcType=VARCHAR},
      </if>
      <if test="tFreshExp != null" >
        token_fh_exp = #{tokenFhExp,jdbcType=VARCHAR},
      </if>
      <if test="tStatus != null" >
        token_fh_status = #{tokenFhStatus,jdbcType=VARCHAR},
      </if>
      <if test="stype != null" >
        stype = #{stype,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        update_time = #{updateTime,jdbcType=VARCHAR},
      </if>
         <if test="tempStr1 != null" >
        temp_str1 = #{tempStr1,jdbcType=VARCHAR},
      </if>
        <if test="tempStr2 != null" >
        temp_str2 = #{tempStr2,jdbcType=VARCHAR},
      </if>
        <if test="tempStr3 != null" >
        temp_str3 = #{tempStr3,jdbcType=VARCHAR},
      </if>
        <if test="tempStr4 != null" >
        temp_str4 = #{tempStr4,jdbcType=VARCHAR},
      </if>
        <if test="tempStr5 != null" >
        temp_str5 = #{tempStr5,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.cy.core.user.entity.UserAuth" > 
    update cy_user_auth
    set userid = #{userid,jdbcType=VARCHAR},
       username = #{username,jdbcType=VARCHAR},
      client_sys = #{clientSys,jdbcType=VARCHAR},
      client_meid = #{clientMeid,jdbcType=VARCHAR},
      client_macid = #{clientMacid,jdbcType=VARCHAR},
      token = #{token,jdbcType=VARCHAR},
      token_exp = #{tokenExp,jdbcType=VARCHAR},
      token_status = #{tokenStatus,jdbcType=VARCHAR},
      token_fh = #{tokenFh,jdbcType=VARCHAR},
      token_fh_exp = #{tokenFhExp,jdbcType=VARCHAR},
      token_fh_status = #{tokenFhStatus,jdbcType=VARCHAR},
      stype = #{stype,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=VARCHAR},
      temp_str1 = #{tempStr1,jdbcType=VARCHAR},
		temp_str2 = #{tempStr2,jdbcType=VARCHAR},
		temp_str3 = #{tempStr3,jdbcType=VARCHAR},
		temp_str4 = #{tempStr4,jdbcType=VARCHAR},
		 temp_str5 = #{tempStr5,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  <update id="updatetoken" parameterType="com.cy.core.user.entity.UserAuth" > 
    update cy_user_auth
    set userid = #{userid,jdbcType=VARCHAR},
      token = #{token,jdbcType=VARCHAR},
      token_exp = #{tokenExp,jdbcType=VARCHAR},
      token_status = #{tokenStatus,jdbcType=VARCHAR}, 
      update_time = #{updateTime,jdbcType=VARCHAR}   
     where token_fh = #{tokenFh,jdbcType=VARCHAR}
  </update>
  
   <update id="updatetokenfhstatus" parameterType="com.cy.core.user.entity.UserAuth" > 
    update cy_user_auth   set
      token_status = #{tokenStatus,jdbcType=VARCHAR},       
      token_fh_status = #{tokenFhStatus,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=VARCHAR}   
      where token_fh = #{tokenFh,jdbcType=VARCHAR}
  </update>
  
</mapper>