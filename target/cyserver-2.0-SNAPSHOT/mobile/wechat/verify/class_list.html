<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>未认证班级列表</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">

    <!--css-->
    <link href="../static/plug/swiper/swiper.min.css" rel="stylesheet" type="text/css" />
    <link href="../static/css/Hui.css" rel="stylesheet" type="text/css" />
    <link href="../static/css/dropload.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../static/css/font_my_center/iconfont.css" type="text/css" media="screen,print">
    <link href="../static/css/my_center.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        body{background-color: #ebebeb;}
        .chked{
            color:#52ace5;
        }
    </style>

</head>
<body>
<div class="" style="position:relative;">
    <img class="imgpost" src="../static/img/stydyban.png" style=" width:100%;vertical-align: middle">
    <!--顶层社团tabs: 未认证|申请记录-->
    <div class="tab-group team-tabs-group H-tabs-channel H-overflow-scrolling H-position-absolute H-width-100-percent" style="bottom:-5px;">
        <ul class="tab_list H-width-100-percent H-auto-height H-flexbox-horizontal H-clear-both H-theme-background-color-transparent H-padding-5
        H-box-sizing-border-box H-theme-font-color-white" style="font-size:16px; background-color: rgba(255,255,255,0.3);">
            <li tapmode="" id="shz"
                class="H-channel-item H-flex-item H-tabs-active H-margin-horizontal-right-5
                H-text-align-center chked">未认证
            </li>|
            <li tapmode="" id="wsh" onclick="goVerifyList()"
                class="H-channel-item H-flex-item  H-margin-horizontal-right-5 H-text-align-center">申请记录
            </li>
        </ul>
    </div>
</div>

<div class="class_list">

    <!--    <div id="classItem2" class="H-border-radius3-px H-theme-background-color-white H-margin-vertical-bottom-5
         H-border-vertical-both-after H-border-horizontal-both-after">
            <div class="H-padding-vertical-both-8 H-padding-horizontal-both-10 H-flexbox-horizontal H-theme-font-color16 H-font-size-14
        H-flexbox-horizontal H-text-horizontal-left H-box-sizing-border-box" style="padding-bottom:0;">
                <span class="H-display-block H-flex-item H-text-align-left" style="border-bottom:1px solid #ebebeb; padding-left:5px;">
                    2012级 [测试一般]
                </span>
            </div>
            <div class="H-theme-background-color-white H-border-vertical-bottom-after">
                <div class="H-padding-vertical-both-10 H-font-size-12 H-display-block H-text-show-row-1"
                     style="padding-left: -3px;color: #999; padding-left:15px">
                    广州科技贸易职业学院北京分校&gt;计算机科学与技术学院
                </div>
            </div>

        </div>

        <div id="classItem1" onclick="goVerifyForm('111')"
             class="H-border-radius-3 H-theme-background-color-white H-margin-vertical-bottom-5
         H-border-vertical-both-after H-border-horizontal-both-after">
            <div class="H-padding-10 H-flexbox-horizontal H-theme-font-color16 H-font-size-16
        H-flexbox-horizontal H-text-horizontal-left H-box-sizing-border-box" style="padding-bottom:0;">
            <span class="H-display-block H-flex-item H-text-align-left"
                  style="border-bottom:1px solid #ebebeb; padding-bottom: 10px;padding-left:18px">计算机科技与技术嵌入班</span>
            </div>
            <div class="H-flexbox-horizontal H-theme-background-color-white H-border-vertical-bottom-after">
                <div class="H-padding-vertical-both-10" style="padding-left:20px">
                    <span class="H-display-block H-margin-horizontal-left-8" style="line-height: 50px; color:#262626">2012级</span>
                </div>
                <div class="H-flex-item H-padding-10" style="padding-left:14px">
                    <div class=" H-font-size-14 H-display-block H-text-show-row-1" style="color:#262626">
                        广州科技大学
                    </div>
                    <div class="H-font-size-12 H-theme-font-color-666 H-text-show-row-1" style="padding-top:8px">
                        计算机科学与信息工程学院
                    </div>
                </div>
            </div>

        </div>

       <div id="classItem3"
             class="H-border-radius3-px H-theme-background-color-white H-margin-vertical-bottom-5
         H-border-vertical-both-after H-border-horizontal-both-after">
            <div class="H-padding-10 H-flexbox-horizontal H-theme-font-color16 H-font-size-16
        H-flexbox-horizontal H-text-horizontal-left H-box-sizing-border-box" style="padding-bottom:0;">
            <span class="H-display-block H-flex-item H-text-align-left"
                  style="border-bottom:1px solid #ebebeb; padding-bottom: 10px;padding-left:18px">计算机科技与技术嵌入班</span>
            </div>
            <div class="H-flexbox-horizontal H-theme-background-color-white H-border-vertical-bottom-after">
                <div class="H-padding-vertical-both-10" style="padding-left:20px">
                    <span class="H-display-block H-margin-horizontal-left-8" style="line-height: 50px; color:#262626">2012级</span>
                </div>
                <div class="H-flex-item H-padding-10" style="padding-left:14px">
                    <div class=" H-font-size-14 H-display-block H-text-show-row-1" style="color:#262626">
                        广州科技大学
                    </div>
                    <div class="H-font-size-12 H-theme-font-color-666 H-text-show-row-1" style="padding-top:8px">
                        计算机科学与信息工程学院
                    </div>
                </div>
            </div>

        </div>-->


</div>

<!--没有申请任何的学习经历, 跳转至 verify_select.html, 申请 学习经历
对于 刚注册的用户,都是没有学习经历的,首先要去选择或是手动提交申请学习经历-->
<div class="H-margin-horizontal-both-15 H-margin-vertical-top-15">
        <span tapmode="" onclick="goApplyStudyPath()"
              class="H-theme-font-color16 H-float-right H-font-size-14">未找到您的班级？试试其他方式</span>
</div>


</body>
</html>

<!--引入脚本文件-->
<script src="../static/plug/swiper/swiper.min.js" type="text/javascript"></script>
<script src="../../js/H.js" type="text/javascript"></script>
<script src="../../js/zepto.min.js" type="text/javascript" ></script>
<script src="../../js/xdomain.min.js" type="text/javascript"></script>
<script src="../../js/B.js" type="text/javascript" ></script>
<script src="../static/js/lrz.mobile.min.js"></script>
<script src="../static/js/dropload.min.js" type="text/javascript" ></script>
<script type="text/javascript" src="../../js/jbase64.js" ></script>
<script type="text/javascript" src="../../js/wechat.js" ></script>

<script type="text/javascript">
    // 接收参数
    var accountNum = B.getUrlParamByName("accountNum");
    var fromFoundation = B.getUrlParamByName("fromFoundation");

    var openId = localStorage.getItem("openId");
    if(openId && openId != "null") {
        // 微信端
        accountNum = localStorage.getItem("accountNum");

        if(!accountNum || accountNum == ''){
            H.confirm(function (ret) {
                if(ret.buttonIndex==1){
                    var backUrl = B.encrypt("verify/class_list.html?ts=" + B.getRandomInt(4));
                    H.openWin("登陆页面", "../login.html?ts=" + B.getRandomInt(4) + "&backUrl=" + backUrl);
                }
                else{
                    history.back();
                }
            }, '确认提示：', '尚未登陆，是否登陆账号？');
        }
        var shareData = {
            title: '班級列表',
            desc: '',
            link: location.href.split('?')[0],
            imgUrl: ''
        };
        mkShareInfo(location.href, shareData, 1);

    }

    $(function () {
        //获取未认证的班级列表
        getClassList();

//        var index='';
        //点击选项卡, 变化样式
        $('.tab_list').on('click','li',function(){
            $(this).addClass('chked').siblings().removeClass('chked');
        });
    })

    function getClassList() {
        B.ready(function () {

            $.ajax({
                type: "post",
                url: B.serverUrl+'/userProfile/userProfileAction!doNotNeedSessionAndSecurity_userProfileHandler.action',
                data:{
                    jsonStr:'{"command": "301","content": {"accountNum": "' + accountNum + '"}}'
                },
                dataType: "json",
                success: function(data){
                    if(data && data.success) {
                        if(data.obj.length>0) {
                            var objList = data.obj;
                            for(var i=0; i<objList.length; i++) {
                                var pathItem = objList[i].fullStudyPath.split(',');
                                var objItem =
//                                '<div  id="classItem1" onclick="goVerifyForm(\''+objList[i].strStudyPathId+'\',\''+objList[i].memberCount+'\')" ' +
                                        '<div  id="classItem1" onclick="goTfN(\''+objList[i].strStudyPathId+'\',\''+objList[i].memberCount+'\')" ' +
                                        'class="H-vertical-middle H-overflow-hidden H-margin-vertical-top-5"> ' +
                                        '   <div class="H-flexbox-horizontal H-box-sizing-border-box H-theme-background-color-white H-border-vertical-bottom-after ' +
                                        '   H-clear-both H-padding-horizontal-both-10 H-padding-vertical-both-8 H-touch-active">'+
                                        '       <div class="H-flex-item H-vertical-middle H-overflow-hidden">'+
                                        '           <div class="H-width-100-percent">'+
                                        '               <span class="H-display-block H-theme-font-color16 H-font-size-14 H-text-show-row-1" ' +
                                        '                   style="border-bottom:1px solid #ebebeb;padding-bottom: 5px;">'+pathItem[2]+'【'+pathItem[3]+'】'+
                                        '               </span>'+
                                        '               <div class="H-theme-font-color-999 H-font-size-12 H-padding-vertical-top-5 H-text-show-row-1">'+
                                        pathItem[0]+pathItem[1]+' > '+pathItem[3]+
                                        '               </div>'+
                                        '           </div>'+
                                        '       </div>'+
                                        '       <div class="H-font-size-12 H-theme-font-color-999 H-text-align-right" style="position: absolute;right:10px;top:10px">'+
                                        '           <label class="H-display-block">['+objList[i].memberCount+']</label> '+
                                        '       </div>'+
                                        '   </div>'+
                                        '</div>';

                                $('.class_list').append(objItem);
                            }
                        }
                    }
                },
                error: function(xhr,type){
                    alert("调用失败")
                }
            });


        })
    }

    //点击"未认证班级列表"中的某个班级,提交认识的同学,帮忙通过认证
    function goVerifyForm(pathId,mCount) {
        //如果班级内只有用户一人(有可能该用户创建了此班级,发现有误,又删除所造成的)
        //总之, 班级内只有一个人的时候, 不能提交其他同学的姓名帮忙认证,需要选择其他方式申请新的班级
        if(mCount < 2) {
            H.alert(function () {
            },"亲,该班内的人数太少,无法帮您认证,请申请其他班级")
        }else{
            H.openWin("请同学帮忙通过认证班级","verify_form.html?ts="+B.getRandomInt(4)+"&pathId="+pathId+'&fromFoundation='+fromFoundation);
        }

    }

    //9选3认证
    function goTfN(pathId,mCount) {

        //?至少是9个人还是3个人
        if(mCount <= 3) {
            H.alert("亲,该班内的人数太少,无法帮您认证,请申请其他班级")
        }else{
            H.openWin("请同学帮忙通过认证班级","verify_3f9.html?ts="+B.getRandomInt(4)+"&pathId="+pathId+'&fromFoundation='+fromFoundation);
        }

    }

    //没有学习经历的用户,要去申请学习经历
    function goApplyStudyPath() {
        H.openWin("申请其他班级","verify_select.html?ts="+B.getRandomInt(4)+'&fromFoundation='+fromFoundation);
    }

    //用户提出申请认证班级
    function goVerifyList(){
        H.openWin("认证申请状态","verify_list.html?ts="+B.getRandomInt(4)+'&fromFoundation='+fromFoundation);

    }
</script>