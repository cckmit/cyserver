<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>分会组织</title>
    <link rel="stylesheet" type="text/css" href="css/common.css" />
    <link rel="stylesheet" type="text/css" href="css/join.css" />
    
    
</head>
<style>
	.no-dian{
		width: 100%;
		height:100%;
		opacity:0.5;
		filter:alpha(opacity=50);
		z-index: 10;
	}
	.invite {
		z-index: 11;
		width: 86%;
		height: 29rem;
		top: 50%;
		left: 7%;
		margin-top: -14rem;
		border: .1rem solid #c7c7c7;
		border-radius: .5rem;
		box-shadow: 0 0 2rem #c7c7c7;
		background: #ffffff;
	}

	.in-con {
		width: 100%;
		height: 24rem;
		overflow-y: scroll;
	}

	.in-tit {
		width: 100%;
		text-align: center;
		height: 4rem;
		line-height: 4rem;
		font-size: 1.2rem;
		color: #262626;
	}

	p.in-name {
		width: 90%;
		margin-left: 5%;
		font-size: 1rem;
		color: #c7c7c7;
		min-height: 1.6rem;
		line-height: 1.6rem;
	}

	.in-box {
		width: 90%;
		margin-left: 5%;
		height: 7rem;
		border: .05rem solid #f6f6f6;
		margin-top: .5rem;
	}

	.in-box img {
		width: 6rem;
		height: 6rem;
		margin: .45rem;
	}
	.mess-tit {
		height: 3rem;
		line-height: 3rem;
		font-size: 1.1rem;
		color: #3e3e3e;
	}

	.mess-chp {
		height: 3em;
		line-height: 4rem;
		color: #3e3e3e;
		font-size: 1rem;
	}

	.in-mess {
		margin-left: 0.5rem;
	}
	.miss {
		width: 100%;
		height: 3.8rem;
		line-height: 4rem;
		text-align: center;
		font-size: 1.2rem;
		color: #000000;
		border-top: .1rem solid #c3c3c3;
		margin-top:1rem
	}
</style>

<body>
<div class="no-dian fixed dis-n"></div>
<!--<div class="invite fixed">
	<div class="in-con">
		<p class="in-tit">分会邀请</p>
		<p class="in-name">李星，王浩等分会管理员邀请您加入他们的分会，快去加入吧</p>
		<div class="in-box">
			<img class="f-l dis-in" src="images/di-chapter.png" alt="">
			<div class="f-l in-mess">
				<p class="mess-tit">窗友大学武汉分会</p>
				<p class="mess-chp">分会类型:地方分会</p>
			</div>
		</div>
	</div>
	<div class="miss">忽略</div>
</div>-->


	<div class="chapter-sel">
        <div class="sel1 f-l active">
           院系分会
        </div>
        <div class="sel2 f-l">
            地方分会
        </div>
 		<div class="sel3 f-l">
            行业分会
        </div>        
    </div>
    <div class="intest">选择感兴趣的分会组织申请加入</div>
	<div class="no-more dis-n">暂无更多分会</div>
    <div class="box-content ">
        <div class="box1">
        	<!--<div class="box1-list">
        		<img class="dis-b f-l box1-img1" src="images/yuan-chapter.png" alt=""/>
        		<div class="f-l box1-cont">
        			<p class="box1-p1 text-hide-1">窗友科技大学计算机学院</p>
        			<p class="box1-p2"><span class="p2-sp">类型：院系分会</span><span>成员：24人</span></p>
        			
        		</div>
        		<img class="dis-b f-r box1-img2" src="images/state1.png" alt=""/>

        	</div>-->
			 	
        </div>
		<div class="box2 dis-n">
        	 
        </div> 
		<div class="box3 dis-n">
        	 
        </div>                 
    </div>
    
     
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script src="../js/xdomain.min.js" type="text/javascript" ></script>
<script src="../js/B.js" type="text/javascript" ></script>
<script src="../js/H.js" type="text/javascript"></script>
<script type="text/javascript">
	var accountNum= B.getUrlParamByName('accountNum');
	localStorage.setItem('id',accountNum);

	 
	function tab1() {
		$.ajax({
			type: "post",
			url: B.serverUrl + '/userProfile/userProfileAction!doNotNeedSessionAndSecurity_userProfileHandler.action',
			data: {
				jsonStr: '{"command": "28","content": {"type": "1"  ,"userId":"' + accountNum + '"} }'
			},
			dataType: "json",
			success: function (data) {
				console.log(data);
				if(data.obj.length==0){
					$('.no-more').show();
				}else{
					var result="";
					for(var i=0;i<data.obj.length;i++){
						result+='<div class="box1-list">'+
						'<img class="dis-b f-l box1-img1" src="images/yuan-chapter.png" alt=""/>'+
						'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
						'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
						'<p class="box1-p2"><span class="p2-sp">'+"类型：院系分会"+'</span>'+'<span>'+'</p>'+
						'</div>'+
						'<img class="dis-b f-r box1-img2" src="images/state2.png" alt=""/>'+
						'</div>'
					}
					$('.box1').append(result)
				}

			},
			error: function () {

			}
		})
	}

	function tab2() {
		$.ajax({
			type: "post",
			url: B.serverUrl + '/userProfile/userProfileAction!doNotNeedSessionAndSecurity_userProfileHandler.action',
			data: {
				jsonStr: '{"command": "28","content": {"type": "2"  ,"userId":"' + accountNum + '"} }'
			},
			dataType: "json",
			success: function (data) {
				console.log(data);
				if(data.obj.length==0){
					$('.no-more').show();
				}else{
					var result="";
					for(var i=0;i<data.obj.length;i++){
						if(data.obj[i].status==undefined){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/di-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：地方分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+ '</div>'
						}
						if(data.obj[i].status==10){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/di-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：地方分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+
							'<img class="dis-b f-r box1-img2" src="images/state3.png" alt=""/>'+
							'</div>'
						}
						if(data.obj[i].status==20){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/di-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：地方分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+
							'<img class="dis-b f-r box1-img2" src="images/state2.png" alt=""/>'+
							'</div>'
						}
						if(data.obj[i].status==30){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/di-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：地方分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+
							'<img class="dis-b f-r box1-img2" src="images/state1.png" alt=""/>'+
							'</div>'
						}

					}
					$('.box2').append(result)
				}

			},
			error: function () {

			}
		})
	}
	function tab3() {
		$.ajax({
			type: "post",
			url: B.serverUrl + '/userProfile/userProfileAction!doNotNeedSessionAndSecurity_userProfileHandler.action',
			data: {
				jsonStr: '{"command": "28","content": {"type": "3"  ,"userId":"' + accountNum + '"} }'
			},
			dataType: "json",
			success: function (data) {
				console.log(data);
				if(data.obj.length==0){
					$('.no-more').show();
				}else{
					var result="";
					for(var i=0;i<data.obj.length;i++){
						if(data.obj[i].status==undefined){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/hang-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：行业分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+ '</div>'
						}
						if(data.obj[i].status==10){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/hang-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：行业分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+
							'<img class="dis-b f-r box1-img2" src="images/state3.png" alt=""/>'+
							'</div>'
						}
						if(data.obj[i].status==20){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/hang-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：行业分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+
							'<img class="dis-b f-r box1-img2" src="images/state2.png" alt=""/>'+
							'</div>'
						}
						if(data.obj[i].status==30){
							result+='<div class="box1-list">'+
							'<img class="dis-b f-l box1-img1" src="images/hang-chapter.png" alt=""/>'+
							'<div class="f-l box1-cont">'+'<i class="dis-n chapid">'+data.obj[i].id+'</i>'+
							'<p class="box1-p1 text-hide-1">'+data.obj[i].name+'</p>'+
							'<p class="box1-p2"><span class="p2-sp">'+"类型：行业分会"+'</span>'+'<span>'+"成员："+data.obj[i].memberCount+"人"+'</span></p>'+
							'</div>'+
							'<img class="dis-b f-r box1-img2" src="images/state1.png" alt=""/>'+
							'</div>'
						}

					}
					$('.box3').append(result)
				}

			},
			error: function () {

			}
		})
	}
	tab1();

	/*推荐分会加入*/

	$.ajax({
		type: "post",
		url: B.serverUrl + '/userProfile/userProfileAction!doNotNeedSessionAndSecurity_userProfileHandler.action',
		data: {
			jsonStr: '{"command": "1001","content":{"accountNum":"'+accountNum+'"}}'
		},
		dataType: "json",
		success: function (data) {
			console.log(data);
			if(data.obj.length>0){
				var result="";
				var res="";
				var name="";
				var type="";
				var img="";
				$('.no-dian').show();
				for(var i=0;i<data.obj.length;i++){
					if(i>2){
						break;
					}else{
						name+=data.obj[i].presidentName+",";
					}
					if(data.obj[i].mainType==2){
						type='<p class="mess-chp">分会类型:地方分会</p>';
						img='<img class="f-l dis-in" src="images/di-chapter.png" alt="">'
					}else if(data.obj[i].mainType==3){
						type='<p class="mess-chp">分会类型:行业分会</p>';
						img='<img class="f-l dis-in" src="images/hang-chapter.png" alt="">'
					}
					res+='<div class="in-box"><i class="dis-n inviteId">'+data.obj[i].alumniId+'</i>'+img+'<div class="f-l in-mess">'+
					'<p class="mess-tit">'+data.obj[i].alumniName+ '</p>'+type+ '</div></div>'
				}
				result='<div class="invite fixed"><div class="in-con"><p class="in-tit">分会邀请</p>'+
				'<p class="in-name">'+name.substring(0,name.length-1)+"等分会管理员邀请您加入他们的分会，快去加入吧"+'</p>'+res+'</div>'+
				'<div class="miss">忽略</div></div>'

				$('body').append(result)
			}

			$('.miss').click(function(){
				$('.no-dian,.invite').hide()
			})




		},
		error: function () {

		}
	})

	/*跳入分会推荐详情*/
	$(function(){
		var flag = false;
		$("body").on('touchstart touchmove touchend',".in-box", function(event) {
			var chapterId = $(this).find('.inviteId').html();
			switch(event.type) {
				case 'touchstart':
					falg = false;
					break;
				case 'touchmove':
					falg = true;
					break;
				case 'touchend':
					if( !falg ) {
						console.log('点击');

						window.location.href='chapter-details.html?alumniId='+chapterId
					} else {
						console.log('滑动');
					}
					break;
			}
		});

	});



	/*tab切换*/
	$('.sel1').click(function() {
	    $(this).addClass('active').siblings().removeClass('active');
	    $('.box2,.box3,.no-more').hide();
	    $('.box1').show();
		$('.box1').empty();
		tab1();
	});
	$('.sel2').click(function() {
	    $(this).addClass('active').siblings().removeClass('active');
	    $('.box1,.box3,.no-more').hide();
	    $('.box2').show();
		$('.box2').empty();
		tab2();
	});
	$('.sel3').click(function() {
	    $(this).addClass('active').siblings().removeClass('active');
	    $('.box2,.box1,.no-more').hide();
	    $('.box3').show();
		$('.box3').empty();
		tab3();
	});
/*跳转分会详情*/
	$(function(){
		var flag = false;
		$("body").on('touchstart touchmove touchend',".box1-list", function(event) {
			var chapterId = $(this).children(".box1-cont").children(".chapid").html();
			switch(event.type) {
				case 'touchstart':
					falg = false;
					break;
				case 'touchmove':
					falg = true;
					break;
				case 'touchend':
					if( !falg ) {
						console.log('点击');

						window.location.href='chapter-details.html?alumniId='+chapterId
					} else {
						console.log('滑动');
					}
					break;
			}
		});

	});

/*返回*/
	
	var jsonStrBut = {
		"title":"校友活动",
		"btn1":{
			"imgname":"icon_Back@2x.png",
			"imgversion":"20170214",
			"imgbase64":"iVBORw0KGgoAAAANSUhEUgAAABoAAAAsCAYAAAB7aah+AAAAAXNSR0IArs4c6QAAAN1JREFUWAntlkEOgkAMRRkTVl7EA3gPD+D53MjGa7lyr4vxF2gghkIHqnHxmzQdMp3+6YOkVFWw5ZxP8Cu8Di49lOtFnohiN3i8GIpKJyqCZWuxYig5JdJrdZ3thsbXrUQEJxt4PCa90kIn0tF2dBRR3K5IXC5MmkRcSsIVicuFSZOIS0l4owy+M3xuaF1SSi9vQTMP76aGy4CyTP4DZIpuNxSiGDHaBPiB2GwKdoixAJadSow2m4Kdf8N4x4X2Bfe3U2c6e2DvaJ9csTMhFi+i9xqJfU/kQ+ygzz+Pb1Kohi6oSMRTAAAAAElFTkSuQmCC",
			"name":"返回",
			"action":"fallback"
		}
		 
	}
	function menuConfig() {
		window.webkit.messageHandlers.AppModel.postMessage({body: jsonStrBut});
		return jsonStrBut;
	}
	function jsonConfig() {
		var str = JSON.stringify(jsonStrBut);
		window.stub.jsMethod(str);
		return jsonStrBut;
	}
	function fallback() {

			window.location.href = B.serverUrl + "/mobile/services/index_body.html?accountNum=" + accountNum;

	}



</script>
</html>
